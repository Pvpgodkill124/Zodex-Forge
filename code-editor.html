<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zodex Editor – The Code Awakens</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
      background-color: #0f0f0f;
      color: #fff;
    }

    header {
      padding: 12px;
      background: #1e1e1e;
      text-align: center;
      font-size: 1.4em;
      font-weight: bold;
      border-bottom: 1px solid #444;
    }

    .tabs {
      display: flex;
      background-color: #1a1a1a;
      border-bottom: 1px solid #333;
    }

    .tab {
      padding: 10px 20px;
      cursor: pointer;
      background: #1a1a1a;
      border: none;
      color: #aaa;
      font-weight: bold;
    }

    .tab.active {
      color: #fff;
      background-color: #272727;
      border-bottom: 3px solid #00d8ff;
    }

    .editor-container {
      display: flex;
      flex: 1;
    }

    textarea {
      width: 100%;
      height: 100%;
      resize: none;
      padding: 10px;
      font-family: monospace;
      font-size: 1em;
      background-color: #111;
      color: #0f0;
      border: none;
      outline: none;
    }

    .code-section {
      flex: 1;
      display: none;
      flex-direction: column;
    }

    .code-section.active {
      display: flex;
    }

    iframe {
      flex: 1;
      height: 100%;
      border: none;
      background: #fff;
    }

    .preview {
      flex: 1;
      border-left: 2px solid #222;
      background-color: #fff;
    }

    .bottom-bar {
      display: flex;
      justify-content: space-between;
      padding: 8px 16px;
      background: #1a1a1a;
      border-top: 1px solid #333;
    }

    .bottom-bar button {
      padding: 8px 14px;
      font-weight: bold;
      background: #00d8ff;
      color: #000;
      border: none;
      cursor: pointer;
      border-radius: 6px;
    }

    footer {
      text-align: center;
      padding: 8px;
      background: #111;
      color: #aaa;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <header>Zodex Editor – The Code Awakens</header>

  <div class="tabs">
    <button class="tab active" onclick="switchTab('html')">HTML</button>
    <button class="tab" onclick="switchTab('css')">CSS</button>
    <button class="tab" onclick="switchTab('js')">JS</button>
  </div>

  <div class="editor-container">
    <div class="code-section active" id="html">
      <textarea id="htmlCode" placeholder="Write HTML..."></textarea>
    </div>
    <div class="code-section" id="css">
      <textarea id="cssCode" placeholder="Write CSS..."></textarea>
    </div>
    <div class="code-section" id="js">
      <textarea id="jsCode" placeholder="Write JS..."></textarea>
    </div>
    <div class="preview">
      <iframe id="preview"></iframe>
    </div>
  </div>

  <div class="bottom-bar">
    <button onclick="exportCode()">Export</button>
    <button onclick="goToProjects()">My Projects</button>
  </div>

  <footer>Live Preview ⚡️ by Zodex™</footer>

  <script>
    const tabs = document.querySelectorAll('.tab');
    const sections = document.querySelectorAll('.code-section');
    const htmlCode = document.getElementById("htmlCode");
    const cssCode = document.getElementById("cssCode");
    const jsCode = document.getElementById("jsCode");
    const preview = document.getElementById("preview");

    function switchTab(tabName) {
      tabs.forEach(tab => tab.classList.remove("active"));
      sections.forEach(sec => sec.classList.remove("active"));
      document.getElementById(tabName).classList.add("active");
      event.target.classList.add("active");
    }

    function updatePreview() {
      const html = htmlCode.value;
      const css = "<style>" + cssCode.value + "</style>";
      const js = "<script>" + jsCode.value + "<\/script>";
      const full = html + css + js;
      preview.srcdoc = full;
    }

    htmlCode.addEventListener("input", updatePreview);
    cssCode.addEventListener("input", updatePreview);
    jsCode.addEventListener("input", updatePreview);

    // Auto-update preview on load
    window.addEventListener("load", () => {
      htmlCode.value = localStorage.getItem("html") || "";
      cssCode.value = localStorage.getItem("css") || "";
      jsCode.value = localStorage.getItem("js") || "";
      updatePreview();
    });

    // Auto-save every 1 second
    setInterval(() => {
      localStorage.setItem("html", htmlCode.value);
      localStorage.setItem("css", cssCode.value);
      localStorage.setItem("js", jsCode.value);
    }, 1000);

    function exportCode() {
      const filename = prompt("Enter file name:", "my-file");
      if (!filename) return;

      const blob = new Blob(
        [htmlCode.value + "\n<style>" + cssCode.value + "</style>\n<script>" + jsCode.value + "</script>"],
        { type: "text/html" }
      );

      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = filename + ".html";
      a.click();

      // Clear saved draft after export
      localStorage.removeItem("html");
      localStorage.removeItem("css");
      localStorage.removeItem("js");

      // Reset editor
      htmlCode.value = "";
      cssCode.value = "";
      jsCode.value = "";
      updatePreview();
    }

    function goToProjects() {
      window.location.href = "code-project.html";
    }
  </script>
</body>
</html>
